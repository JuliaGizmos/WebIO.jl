<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · WebIO</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">WebIO</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">WebIO.jl</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Installing-WebIO"><span>Installing WebIO</span></a></li><li><a class="tocitem" href="#Displaying-to-a-Frontend"><span>Displaying to a Frontend</span></a></li><li><a class="tocitem" href="#Composing-Content"><span>Composing Content</span></a></li><li><a class="tocitem" href="#JavaScript"><span>JavaScript</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../api/about/">About This Reference</a></li><li><a class="tocitem" href="../api/node/">Nodes</a></li><li><a class="tocitem" href="../api/scope/">Scopes</a></li><li><a class="tocitem" href="../api/render/">Render</a></li><li><a class="tocitem" href="../api/asset/">Assets</a></li><li><a class="tocitem" href="../api/jsstring/">JSString</a></li><li><a class="tocitem" href="../api/observable/">Observables</a></li></ul></li><li><span class="tocitem">Frontends</span><ul><li><a class="tocitem" href="../providers/ijulia/">IJulia (Jupyter)</a></li><li><a class="tocitem" href="../providers/blink/">Blink</a></li><li><a class="tocitem" href="../providers/mux/">Blink</a></li></ul></li><li><a class="tocitem" href="../extending/">Extending WebIO</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGizmos/WebIO.jl/blob/master/docs/src/gettingstarted.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><h2 id="Installing-WebIO"><a class="docs-heading-anchor" href="#Installing-WebIO">Installing WebIO</a><a id="Installing-WebIO-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-WebIO" title="Permalink"></a></h2><p>WebIO is installed just like any other Julia package.</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;WebIO&quot;)
using WebIO</code></pre><p>Make sure to watch for any errors during the build process; WebIO does its best to install everything to the right location, but sometimes it can&#39;t find all the right things (especially for Jupyter). If you get any warnings, please file an issue on GitHub.</p><h2 id="Displaying-to-a-Frontend"><a class="docs-heading-anchor" href="#Displaying-to-a-Frontend">Displaying to a Frontend</a><a id="Displaying-to-a-Frontend-1"></a><a class="docs-heading-anchor-permalink" href="#Displaying-to-a-Frontend" title="Permalink"></a></h2><p>First, load the appropriate frontend (e.g. Jupyter or Blink or Atom/Juno). For simplicity, Jupyter is recommended while you&#39;re getting started.</p><h3 id="Jupyter"><a class="docs-heading-anchor" href="#Jupyter">Jupyter</a><a id="Jupyter-1"></a><a class="docs-heading-anchor-permalink" href="#Jupyter" title="Permalink"></a></h3><p>In a Julia Jupyter notebook (either via the classic notebook interface or in JupyterLab), any WebIO content is automagically rendered into the browser. For example, try displaying a paragraph.</p><pre><code class="language-julia hljs">In[*]: node(:p, &quot;Hello, Jupyter&quot;)</code></pre><h3 id="Blink"><a class="docs-heading-anchor" href="#Blink">Blink</a><a id="Blink-1"></a><a class="docs-heading-anchor-permalink" href="#Blink" title="Permalink"></a></h3><p>Blink is a Julia interface for <a href="https://electronjs.org/">Electron</a> (a way to write desktop apps using web technologies). WebIO content can be displayed in a Blink window using the <code>body!</code> function.</p><pre><code class="language-julia hljs">using Blink
w = Window()
body!(w, dom&quot;p&quot;(&quot;Hello, Blink!&quot;))</code></pre><h3 id="Mux"><a class="docs-heading-anchor" href="#Mux">Mux</a><a id="Mux-1"></a><a class="docs-heading-anchor-permalink" href="#Mux" title="Permalink"></a></h3><p>Return a WebIO <a href="../api/node/#WebIO.Node"><code>Node</code></a> from a web app to render it. Use <a href="../providers/mux/#WebIO.webio_serve"><code>webio_serve</code></a> to serve the application.</p><pre><code class="language-julia hljs">function myapp(req)
    return node(:p, &quot;Hello, Mux!&quot;)
end

webio_serve(page(&quot;/&quot;, req -&gt; myapp(req)))</code></pre><h3 id="Generic-HTTP"><a class="docs-heading-anchor" href="#Generic-HTTP">Generic HTTP</a><a id="Generic-HTTP-1"></a><a class="docs-heading-anchor-permalink" href="#Generic-HTTP" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Create your own display function
function Base.display(d::MyWebDisplay, m::WebIO.WEBIO_APPLICATION_MIME, app)
    println(d.io, &quot;outer html&quot;)
    # Calling show will make sure a server is running and serves dependencies
    # from AssetRegistry and a websocket connection gets established.
    show(d.io, m, app) #&lt;- prints the html + scripts webio needs to work into io
    println(d.io, &quot;close outer html&quot;)
end</code></pre><h3 id="Juno"><a class="docs-heading-anchor" href="#Juno">Juno</a><a id="Juno-1"></a><a class="docs-heading-anchor-permalink" href="#Juno" title="Permalink"></a></h3><p>WebIO nodes should be automatically rendered when displayed.</p><h2 id="Composing-Content"><a class="docs-heading-anchor" href="#Composing-Content">Composing Content</a><a id="Composing-Content-1"></a><a class="docs-heading-anchor-permalink" href="#Composing-Content" title="Permalink"></a></h2><p>Suppose we want to display the following HTML.</p><pre><code class="language-html hljs">&lt;ul class=&quot;my-list&quot;&gt;
    &lt;li&gt;get milk&lt;/li&gt;
    &lt;li&gt;make a pie&lt;/li&gt;
&lt;/ul&gt;</code></pre><p>We can nest nodes inside of each other to accomplish this.</p><pre><code class="language-julia hljs">Node(
    :ul,
    Node(:li, &quot;get milk&quot;),
    Node(:li, &quot;make a pie&quot;),
    attributes=Dict(:class =&gt; &quot;my-list&quot;),
)</code></pre><p>Some DOM properties (most importantly, <code>style</code> and <code>events</code>) can be specified as Julia dictionaries.</p><pre><code class="language-julia hljs">Node(
    :div,
    &quot;Hello, world!&quot;,
    style=Dict(
        :backgroundColor =&gt; &quot;black&quot;,
        :color =&gt; &quot;white&quot;,
        :padding =&gt; &quot;12px&quot;,
   ),
)</code></pre><p>This is equivalent to this snippet using <code>attributes</code>.</p><pre><code class="language-julia hljs">Node(
    :div,
    &quot;Hello, World&quot;,
    attributes=Dict(
        :style =&gt; &quot;background-color: black; color: white; padding: 12px&quot;,
    ),
)</code></pre><p>Checkout out the <a href="../api/node/#WebIO.Node"><code>Node</code></a> reference for more information.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The <code>attributes</code> keyword argument sets the attributes of the HTML element (via the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute"><code>setAttribute</code></a> DOM API function). Any other keyword argument is set as the property of the <a href="https://developer.mozlla.org/en-US/docs/Web/API/Document_Object_Model/Introduction">DOM node</a> itself.</p><p><strong>N.B.</strong> Attribute values should be strings (or <code>nothing</code>, in which case the attribute is deleted). Attribute keys are specified with the name as would be written in HTML (e.g. <code>class</code> for the CSS class name) whereas properties are specified as the name in the browser DOM API (e.g. <code>className</code>). This is because one writes</p><pre><code class="language-html hljs">&lt;p class=&quot;important&quot;&gt;Don&#39;t stuff beans up your nose!&lt;/p&gt;</code></pre><p>whereas the DOM API would be</p><pre><code class="language-js hljs">myParagraph = document.createElement(&quot;p&quot;);
myParagraph.className = &quot;important&quot;;
// Or, equivalently...
myParagraph.setAttribute(&quot;class&quot;, &quot;important&quot;);</code></pre><p>For example, the following are equivalent.</p><pre><code class="language-julia hljs">node(:ul, className=&quot;my-list&quot;)
node(:ul, attributes=Dict(:class =&gt; &quot;my-list&quot;))</code></pre><p>When in doubt, use <code>attributes</code> for everything except the <code>style</code> and <code>events</code> properties.</p></div></div><h3 id="The-dom&quot;&quot;-macro"><a class="docs-heading-anchor" href="#The-dom&quot;&quot;-macro">The <code>dom&quot;&quot;</code> macro</a><a id="The-dom&quot;&quot;-macro-1"></a><a class="docs-heading-anchor-permalink" href="#The-dom&quot;&quot;-macro" title="Permalink"></a></h3><p>The <code>dom&quot;&quot;</code> string macro can be used to simplify the creation of DOM nodes and is based on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector"><code>querySelector</code></a> DOM API. The syntax for the macro is</p><pre><code class="language-julia hljs">dom&quot;&lt;tag&gt;.&lt;class&gt;#&lt;id&gt;[&lt;attr&gt;=&lt;value&gt;,...]&quot;(children...; props...)</code></pre><p>which is equivalent to</p><pre><code class="language-julia hljs">Node(
    :tag,
    children...,
    className=&quot;&lt;class&gt;&quot;,
    id=&quot;&lt;id&gt;&quot;,
    attributes=Dict(:attr1 =&gt; val1, :attr2 =&gt; val2...);
    props...
)</code></pre><p>For example</p><pre><code class="language-julia hljs">dom&quot;div.warning.big-text#my-modal[aria-modal=true]&quot;(
    dom&quot;p&quot;(&quot;Uh oh! A bad thing happened.&quot;),
)</code></pre><p>yields this HTML</p><pre><code class="language-html hljs">&lt;div id=&quot;my-modal&quot; class=&quot;warning big-text&quot; aria-modal=&quot;true&quot;&gt;
    &lt;p&gt;Uh oh! A bad thing happened.&lt;/p&gt;
&lt;/div&gt;</code></pre><p>Everything except the tag is optional, so all of these are valid.</p><ul><li><code>dom&quot;div&quot;</code></li><li><code>dom&quot;div.class1&quot;</code></li><li><code>dom&quot;div.class1.class2&quot;</code></li><li><code>dom&quot;div#my-id&quot;</code></li><li><code>dom&quot;input.check[type=checkbox]&quot;</code></li></ul><h2 id="JavaScript"><a class="docs-heading-anchor" href="#JavaScript">JavaScript</a><a id="JavaScript-1"></a><a class="docs-heading-anchor-permalink" href="#JavaScript" title="Permalink"></a></h2><h3 id="Executing-JavaScript"><a class="docs-heading-anchor" href="#Executing-JavaScript">Executing JavaScript</a><a id="Executing-JavaScript-1"></a><a class="docs-heading-anchor-permalink" href="#Executing-JavaScript" title="Permalink"></a></h3><p>Event handlers can be set up by passing a dict as the <code>events</code> keyword argument to <code>Node</code>, (and the <a href="@ref @dom_str"><code>dom&quot;&quot;</code></a> macro). For example,</p><pre><code class="language-julia hljs">dom&quot;button&quot;(
    &quot;Greet&quot;,
     events=Dict(
        &quot;click&quot; =&gt; js&quot;function() { alert(&#39;Hello, World!&#39;); }&quot;,
    ),
)</code></pre><p>This will create a button which shows an alert box with the message &quot;Hello, World!&quot; when clicked.</p><p>There are 2 ways to write JavaScript in conjunction with WebIO. First, you can use the <a href="../api/jsstring/#WebIO.@js_str"><code>js&quot;&quot;</code></a> string macro to just write any JavaScript as a string. For example</p><pre><code class="nohighlight hljs">js&quot;&quot;&quot;
alert(&quot;Hello, World!&quot;)
&quot;&quot;&quot;</code></pre><p>This will return an object of type <code>JSString</code> which can be used anywhere WebIO expects JavaScript expressions. The <a href="../api/jsstring/#WebIO.@js_str"><code>js&quot;&quot;</code></a> macro also appropriately escapes any interpolated variables.</p><pre><code class="language-julia-repl hljs">julia&gt; myvar = [1, &quot;foo&quot;, Dict(&quot;foo&quot; =&gt; &quot;bar&quot;)];
julia&gt; println(js&quot;console.log($myvar);&quot;)
console.log([1,&quot;foo&quot;,{&quot;foo&quot;:&quot;bar&quot;}]);</code></pre><p>The second way is to use the <code>@js</code> macro from <a href="https://github.com/JuliaGizmos/JSExpr.jl">JSExpr.jl</a>. The <code>@js</code> macro can translate arbitrary Julia expressions to the equivalent JavaScript.</p><pre><code class="language-julia hljs">using JSExpr
@js alert(&quot;Hello, World!&quot;)</code></pre><p>We can rewrite our greeting example above using the <code>@js</code> macro too.</p><pre><code class="language-julia hljs">dom&quot;button&quot;(
    &quot;Greet&quot;,
    events=Dict(
        &quot;click&quot; =&gt; (@js () -&gt; alert(&quot;Hello, World!&quot;)),
    ),
)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The variables and functions you reference in a <code>@js</code> expression must be defined in the JavaScript context where the expression will be executed (for example, in an event callback) and do not need to be defined in Julia.</p><p>Values from Julia can be interpolated into both the <code>js&quot;&quot;</code> and <code>@js</code> macros, but this interpolation happens when the <a href="@ref"><code>JSString</code></a> is created (and <strong>not</strong> when the JavaScript code is executed).</p><p>For example, consider the following snippet.</p><pre><code class="language-julia hljs">myname = &quot;Walter&quot;
display(dom&quot;button&quot;(&quot;Greet Me!&quot;, events=Dict(&quot;click&quot; =&gt; @js alert($myname))))</code></pre><p>When you click the button, it will alert &quot;Walter&quot; as expected. But if you later change the value of <code>myname</code>,</p><pre><code class="language-julia hljs">myname = &quot;Sylvia&quot;</code></pre><p>clicking the button will still result in &quot;Walter&quot; since the value of <code>myname</code> was interpolated when the expression was parsed.</p><p>See <a href="#Communicating-between-Julia-and-JavaScript">Communicating between Julia and JavaScript</a> to learn how to use the latest value of a variable in either Julia or JavaScript.</p></div></div><h3 id="Communicating-between-Julia-and-JavaScript"><a class="docs-heading-anchor" href="#Communicating-between-Julia-and-JavaScript">Communicating between Julia and JavaScript</a><a id="Communicating-between-Julia-and-JavaScript-1"></a><a class="docs-heading-anchor-permalink" href="#Communicating-between-Julia-and-JavaScript" title="Permalink"></a></h3><p>A <a href="../api/scope/#WebIO.Scope"><code>Scope</code></a> acts as a medium for bidirectional communication between Julia and JavaScript. The primary method of communication is <code>Observable</code>s which are essentially wrappers around values that may change over time. A <a href="../api/scope/#WebIO.Scope"><code>Scope</code></a> may contain several observables whose values can be updated and read from either JavaScript or Julia.</p><p>We associate an observable with a scope as follows.</p><pre><code class="language-julia hljs">w = Scope()
obs = Observable(w, &quot;rand-value&quot;, 0.0)</code></pre><p>The <code>&quot;rand-value&quot;</code> argument is the name of the observable and must be unique for a given scope.</p><p>You can get the value of <code>obs</code> in Julia with the syntax <code>obs[]</code>. You can set the value using the syntax <code>obs[] = val</code>. To listen to changes to the value you can use the <code>on</code> function to set up a listener.</p><pre><code class="language-julia hljs">on((value) -&gt; println(&quot;Value is now $(value)!&quot;), obs)</code></pre><p>or, using do-block syntax,</p><pre><code class="language-julia hljs">on(obs) do value
    println(&quot;Value is now $(value)!&quot;)
end</code></pre><h3 id="Sending-values-from-JavaScript-to-Julia"><a class="docs-heading-anchor" href="#Sending-values-from-JavaScript-to-Julia">Sending values from JavaScript to Julia</a><a id="Sending-values-from-JavaScript-to-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Sending-values-from-JavaScript-to-Julia" title="Permalink"></a></h3><p>Sending values from JavaScript to Julia is easiest via the <code>@js</code> macro. Consider this simple example.</p><pre><code class="language-julia hljs">scope = Scope()
obs = Observable(scope, &quot;rand-value&quot;, 0.0)

on(obs) do x
    println(&quot;JavaScript sent $(x)!&quot;)
end

scope(
    dom&quot;button&quot;(
        &quot;Generate Random Number&quot;,
        events=Dict(&quot;click&quot; =&gt; @js () -&gt; $obs[] = Math.random()),
    ),
)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Notice that the last expression actually <em>calls</em> the scope <code>scope</code> with the contents that should be displayed. This causes the contents to be <em>wrapped</em> in the scope&#39;s context. All uses of observables associated with <code>scope</code> (e.g. <code>obs</code>) should be enclosed in the scope <code>scope</code>.</p></div></div><p>Note that we use the syntax <code>$obs[] = ...</code> inside the <code>@js</code> macro to update the value of the <code>obs</code> Observable.</p><p>Using the <a href="../api/jsstring/#WebIO.@js_str"><code>js&quot;&quot;</code></a> macro, we can write</p><pre><code class="language-julia hljs">js&quot;_webIOScope.getObservableValue(&#39;obs&#39;)&quot;</code></pre><p>and</p><pre><code class="language-julia hljs">_webIOScope.setObservableValue(&quot;obs&quot;, ...);</code></pre><p>wherever we want to get and set the values of observables (respectively).</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The values of <code>WebIO</code> and <code>_webIOScope</code> are defined when executing any JavaScript code in WebIO. The value of <code>_webIOScope</code> is the nearest ancestor scope (or <code>undefined</code> if there is none).</p></div></div><h3 id="Sending-values-from-Julia-to-JavaScript"><a class="docs-heading-anchor" href="#Sending-values-from-Julia-to-JavaScript">Sending values from Julia to JavaScript</a><a id="Sending-values-from-Julia-to-JavaScript-1"></a><a class="docs-heading-anchor-permalink" href="#Sending-values-from-Julia-to-JavaScript" title="Permalink"></a></h3><p>The <a href="@ref"><code>onjs</code></a> function allows us to hook up a JavaScript listener on an <code>Observable</code> just like we can use <code>on</code> for a Julia listener. For example, we can log to the console whenever the value of our observable changes.</p><pre><code class="language-julia hljs">s = Scope()
obs = Observable(s, &quot;logme&quot;, &quot;&quot;)
onjs(
    s, &quot;logme&quot;,
    js&quot;&quot;&quot;
    function(newValue) {
        console.log(newValue);
    }
    &quot;&quot;&quot;
)</code></pre><h3 id="Rendering-Observables"><a class="docs-heading-anchor" href="#Rendering-Observables">Rendering Observables</a><a id="Rendering-Observables-1"></a><a class="docs-heading-anchor-permalink" href="#Rendering-Observables" title="Permalink"></a></h3><p>For an even easier way to send values from Julia to JavaScript, we can simply rely on the fact that WebIO knows how to render <code>Observable</code>s directly to HTML. In this case WebIO will automatically construct a <code>Scope</code> and insert the relevant JavaScript to update the rendered content whenever the <code>Observable</code> changes value.</p><pre><code class="language-julia hljs">using Dates
timestr() = Dates.format(now(), &quot;HH:MM:SS&quot;)

time = Observable(timestr())
@async while true
    sleep(1)
    time[] = timestr()
end

display(time)</code></pre><h3 id="Loading-JavaScript-dependencies"><a class="docs-heading-anchor" href="#Loading-JavaScript-dependencies">Loading JavaScript dependencies</a><a id="Loading-JavaScript-dependencies-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-JavaScript-dependencies" title="Permalink"></a></h3><p>You can load dependencies by creating a <a href="../api/scope/#WebIO.Scope"><code>Scope</code></a> object and providing the <code>imports</code> argument. The <code>onmount</code> function will add a mount callback to a scope that will be called with all of the dependencies provided via the <code>imports</code> argument.</p><pre><code class="language-julia hljs">using WebIO, JSExpr

w = Scope(imports=[&quot;//cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.js&quot;])
onmount(w, @js function (p5)
    function sketch(s)
        s.setup = () -&gt; s.createCanvas(640, 480)

        s.draw = function ()
          if s.mouseIsPressed
            s.fill(0)
          else
            s.fill(255)
          end
          s.ellipse(s.mouseX, s.mouseY, 80, 80)
        end
    end
    @new p5(sketch, this.dom.querySelector(&quot;.container&quot;))
end)
w(dom&quot;div.container&quot;())</code></pre><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><h3 id="Clock-(Julia-to-JS-Communication)"><a class="docs-heading-anchor" href="#Clock-(Julia-to-JS-Communication)">Clock (Julia to JS Communication)</a><a id="Clock-(Julia-to-JS-Communication)-1"></a><a class="docs-heading-anchor-permalink" href="#Clock-(Julia-to-JS-Communication)" title="Permalink"></a></h3><pre><code class="language-julia hljs">s = Scope()
s(dom&quot;span.current-time&quot;())
time = Observable(s, &quot;time&quot;, &quot;&quot;)
timestr() = Dates.format(now(), &quot;HH:MM:SS&quot;)

# Update the time every second
@async while true
    time[] = timestr()
    sleep(1)
end

# Setup a JavaScript listener
onjs(
    s, &quot;time&quot;,
    js&quot;&quot;&quot;
    function(time) {
        this.dom.querySelector(&quot;.current-time&quot;).textContent = time;
    }
    &quot;&quot;&quot;
)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>In the <code>onjs</code> callback, <code>this</code> is set to the <a href="../api/scope/#WebIO.Scope"><code>Scope</code></a> object (though the value of <code>_webIOScope</code> is also set, as noted above).</p><p>The value of <code>this.dom</code> refers to the DOM node of the scope. Importantly, this is <strong>not</strong> the content of the scope, but rather, the DOM node that encloses the scope (so we need to use <code>querySelector</code> to find the actual DOM node that we want to update). For example, consider a scope whose content is simply a <code>&lt;span /&gt;</code>; the value of <code>this.dom</code> will be a <code>&lt;div /&gt;</code> whose only child is that <code>&lt;span /&gt;</code>.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« WebIO.jl</a><a class="docs-footer-nextpage" href="../api/about/">About This Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.13 on <span class="colophon-date" title="Monday 28 February 2022 14:31">Monday 28 February 2022</span>. Using Julia version 1.6.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
